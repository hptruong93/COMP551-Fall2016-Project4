#!/usr/bin/python3


import matplotlib
import heapq
#matplotlib.use('Agg') # This must be done before importing matplotlib.pyplot
import matplotlib.pyplot as plt

#group by 4-day 

X=[ -5.57165453e-02,   1.45955160e-02,  -3.04341925e-02,   1.96191118e-02,
    3.71231428e-02,  -1.82871532e-02,  -2.79928762e-02,  -8.45606475e-03,
    1.20402246e-02,   2.10150012e-02,  -2.04200562e-02,   3.13008591e-02,
   -6.32882902e-03,  -1.50404517e-03,   3.32079471e-02,  -1.95990779e-04,
   -6.38879272e-03,  -7.94896725e-04,   6.68309494e-03,   2.13023087e-03,
   -1.85921090e-02,   1.56060790e-02,  -1.40200730e-02,  -7.67201477e-02,
   -9.04595879e-03,   3.23085507e-02,  -3.19892785e-02,  -3.69214545e-02,
    8.73504781e-02,   3.96864894e-03,   2.16522278e-02,   1.00204135e-02,
    1.45955160e-02,   1.03673894e-04,   2.22562819e-03,  -1.32543791e-02,
    2.30125945e-04,  -1.35179386e-02,  -3.54313209e-03,   5.41358590e-03,
    2.72530445e-04,   5.54636608e-03,  -1.08884799e-02,  -8.16936041e-03,
   -1.50404517e-03,   3.65098048e-02,  -5.35199455e-02,   2.80920867e-02,
   -7.00846058e-05,  -4.91292605e-03,   2.20143226e-02,  -1.57932397e-02,
    1.89209359e-02,   1.41625350e-02,  -5.01148520e-02,   2.85314934e-02,
    6.96231420e-03,  -1.42636371e-02,  -1.78392660e-02,   1.63521867e-02,
   -9.18164401e-03,   9.06199546e-03,  -6.54360786e-03,   1.45955160e-02,
    2.22818656e-01,   1.25547948e-01,   1.96161340e-03,   1.79988187e-02,
   -2.97000784e-03,   1.64473446e-03,  -1.74601636e-02,  -8.95708343e-03,
    8.46721049e-03,  -1.65069552e-02,   8.81033980e-03,  -1.50404517e-03,
    2.28807607e-02,  -4.25746519e-02,   3.76237257e-02,   9.88070630e-03,
    2.30964632e-02,   1.46900982e-02,  -9.41306532e-03,  -1.37706237e-02,
   -9.18908002e-03,   1.66169156e-02,   9.23901772e-02,   1.22357798e-02,
    1.77250673e-02,  -1.38933177e-02,  -9.53047335e-03,  -1.46755337e-02,
    8.93750320e-03]
Y=[  3.12320418e-02,  -5.99992548e-03,   1.26850865e-02,  -5.23257832e-02,
   -1.70618269e-02,  -8.01926025e-03,   1.16065508e-02,   1.64232313e-02,
   -9.36182523e-03,  -9.21004218e-03,   2.34412020e-02,  -3.45073869e-02,
    7.13121542e-03,   4.14379112e-04,  -5.54672871e-03,  -1.24686044e-02,
   -6.24571045e-03,  -5.98368174e-03,  -1.43771577e-02,  -7.07900278e-03,
    2.72949187e-02,  -2.20977012e-02,  -2.39705288e-02,   4.60687776e-02,
    5.57873217e-03,  -2.51854093e-02,   3.28674136e-02,   3.18601743e-02,
   -4.55248656e-02,  -3.47562053e-04,  -2.36825219e-02,  -2.19615751e-02,
   -5.99992548e-03,   7.21550394e-02,   1.45335248e-02,  -5.53277915e-02,
    1.05138413e-02,   9.52052680e-03,  -8.76296794e-03,   1.89342529e-03,
    1.09543783e-03,  -8.50883750e-04,   1.04137116e-03,  -1.55045684e-03,
    4.14379112e-04,  -1.42595503e-02,  -1.03304057e-02,  -2.99172973e-02,
   -1.95217629e-02,  -1.85747189e-03,  -2.21707037e-02,   1.59906005e-02,
   -2.50711129e-02,  -4.79865223e-02,   3.36217961e-02,   1.56888228e-02,
    1.33301792e-02,   5.16017050e-03,  -5.93254587e-03,   3.61726177e-02,
    5.62085058e-03,  -1.29278468e-02,   6.04088787e-03,  -5.99992548e-03,
    3.94329654e-02,   2.39554691e-01,   5.59349432e-02,  -1.86071694e-02,
    5.93112998e-04,  -2.27913828e-03,   6.36392066e-03,  -7.57813797e-04,
   -1.40990839e-02,   1.73119434e-02,  -5.33849761e-03,   4.14379112e-04,
   -1.43716710e-02,   4.88122744e-03,  -3.24848975e-02,  -1.56472740e-02,
   -2.17518587e-02,  -1.46719654e-02,   1.71782651e-02,   2.94820419e-03,
   -5.52485130e-03,   1.16547173e-03,  -1.08293838e-01,  -5.44684136e-02,
   -2.93764658e-02,   2.97446177e-02,   5.54430285e-02,   9.32700677e-03,
   -2.82891218e-02]
Z = [ -2.08662583e-02,   6.70067539e-03,   2.62818247e-03,   5.40910474e-04,
    1.00960995e-03,  -9.02189990e-03,  -1.15494690e-02,  -2.43728225e-03,
    4.11335195e-03,   6.63182728e-03,  -9.64929150e-03,   1.17764602e-02,
   -2.74494755e-03,  -2.07176778e-04,   1.57923823e-02,  -4.45990328e-03,
   -3.07833794e-03,  -3.72574220e-04,  -5.05476804e-06,   1.57467042e-03,
   -5.10881551e-03,   3.90934587e-03,  -9.65135404e-03,  -2.50974990e-02,
   -4.21016405e-03,   6.81636874e-03,  -8.42302773e-03,  -1.03533336e-02,
    3.12024994e-02,   1.39896075e-03,   7.10005985e-03,  -4.63757914e-05,
    6.70067539e-03,   2.02978369e-04,  -6.90271871e-03,  -7.89942715e-03,
   -8.42173302e-04,  -4.23145220e-03,  -4.00146855e-04,   2.81711055e-03,
    4.52841132e-04,   3.05141078e-03,  -7.74643055e-03,  -3.39029299e-03,
   -2.07176778e-04,   1.48556140e-02,  -2.20564281e-02,   6.16409598e-03,
   -3.21206907e-03,  -1.06361045e-03,   5.74555258e-03,  -6.05584505e-03,
    5.54686644e-03,  -2.78700612e-03,  -1.28291356e-02,   1.42033578e-02,
    2.96515419e-03,  -5.82212351e-03,  -9.37706108e-03,   9.80212440e-03,
   -2.82382502e-03,   1.01467288e-03,  -2.94888371e-03,   6.70067539e-03,
    3.36269330e-02,   6.70991746e-02,   5.42912353e-02,   5.53460825e-03,
   -7.49597848e-04,   3.05180644e-03,  -6.89974506e-03,  -6.27482394e-03,
    7.87081979e-05,  -2.85495894e-03,   4.05213324e-03,  -2.07176778e-04,
    9.13593566e-03,  -1.68473483e-02,   8.27263718e-03,  -7.55197425e-04,
    7.23852693e-03,   3.10593576e-03,  -2.18293406e-03,  -5.16818604e-03,
   -3.16553115e-03,   8.44594284e-03,   2.43043254e-02,  -7.05771783e-03,
    2.63863899e-03,  -2.19839305e-03,   6.16316281e-03,  -6.12964643e-03,
   -1.09436632e-03]

x_ticks = ['Month',
            'Time Period',
            'X',
            'Y',
            'Z',
            'Altitude',
            'Calcul Freq',
            'Latitude 2',
            'Longitude 2',
            'Pass-Duration',
            'Sensor-1',
            'Sensor-2',
            'Sensor-3',
            'Individual ID',
            'Evaporation',
            'Ground Temperature',
            'Sunshine',
            'Visibility',
            'Charnock Parameter',
            'V Velocity',
            'U Velocity',
            'Total Cloud Cover',
            'Surface Air Pressure',
            'Total Atmospheric Water',
            'Snow Temperature',
            'Distance to Coast',
            'Runoff',
            'Ice Temperature',
            'Soil Temperature',
            'Snow',
            'Soil Water Content']

def plot(X,Y,Z, x_ticks):
    directory =  "/home/2014/choppe1/Documents/COMP551/output_plot/"
    interval = int(len(X))

    d1_x_ticks = ['D1_' + t for t in x_ticks]
    d2_x_ticks = ['D2_' + t for t in x_ticks]
    d3_x_ticks = ['D3_' + t for t in x_ticks]
    x_ticks = d1_x_ticks + d2_x_ticks + d3_x_ticks

    for i in range(1):

        plt.figure()
        start = 0
        stop =  interval
        x_call = list(range(10))
        title = "X"
        X_day = X[start:stop]

        indexes = sorted(range(len(X_day)), key=lambda i: X_day[i])[-10:]

        plt.barh(x_call, [X_day[i] for i in indexes],align="center")

        plt.ylabel('Features')
        plt.xlabel('Weight')
    
        plt.yticks(x_call, [x_ticks[i] for i in indexes])
        plt.title(title + " Features weights")
        plt.tight_layout()
        filename= directory + title
        #plt.savefig(filename)

    for i in range(1):

        plt.figure()
        start = 0
        stop =  interval
        x_call = list(range(10))
        title = "Y"
        X_day = Y[start:stop]

        indexes = sorted(range(len(X_day)), key=lambda i: X_day[i])[-10:]

        plt.barh(x_call, [X_day[i] for i in indexes],align="center")

        plt.ylabel('Features')
        plt.xlabel('Weight')
    
        plt.yticks(x_call, [x_ticks[i] for i in indexes])
        plt.title(title + " Features weights")
        plt.tight_layout()
        filename= directory + title
        #plt.savefig(filename)

    for i in range(1):

        plt.figure()
        start = 0
        stop =  interval
        x_call = list(range(10))
        title = "Z"
        X_day = Z[start:stop]

        indexes = sorted(range(len(X_day)), key=lambda i: X_day[i])[-10:]

        plt.barh(x_call, [X_day[i] for i in indexes],align="center")

        plt.ylabel('Features')
        plt.xlabel('Weight')
    
        plt.yticks(x_call, [x_ticks[i] for i in indexes])
        plt.title(title + " Features weights")
        plt.tight_layout()
        filename= directory + title
        plt.savefig(filename)

def test():
    x=[[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3,4]]
    y=[[1,2,3,4],[1,2,3,4],[1,2,3,4],[1,2,3,4]]
    for i in range(len(x)):
        plt.figure()
        plt.plot(x[i],y[i])
        plt.show()

#test()
plot(X,Y,Z, x_ticks)